<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Battleship</title>
  <link rel="stylesheet" href="styles/colors.css">
  <link rel="stylesheet" href="styles/cohesive.css">
  <link rel="stylesheet" href="styles/game.css">
</head>

<body>
  <div id="menu-bar">
    <table id="menu-bar-table">
      <tr id="menu-bar-table-row">
        <td class="menu-bar-entry"><a href="index.html">Homepage</a></td>
        <td class="menu-bar-entry"><a href="help.html">Help</a></td>
        <td class="menu-bar-entry"><a href="contact.html">About</a></td>
        <td class="menu-bar-entry"><a href="leaderboard.html">Leaderboard</a></td>
      </tr>
    </table>
  </div>

  <div id="content">
    <div id="timer"></div>
    <table id="enemy-table">
      <thead>
        <caption id="enemy_name">ENEMY</caption>
        <caption id="enemy_ships">5 ships remaining</caption>
      </thead>
      <tbody>
        <tr>
          <th> </th>
          <th>A</th>
          <th>B</th>
          <th>C</th>
          <th>D</th>
          <th>E</th>
          <th>F</th>
          <th>G</th>
          <th>H</th>
          <th>I</th>
          <th>J</th>
        </tr>
        <tr>
          <th>0</th>
          <td id="enemy-A0" onclick="attCell(this.id)"></td>
          <td id="enemy-B0" onclick="attCell(this.id)"></td>
          <td id="enemy-C0" onclick="attCell(this.id)"></td>
          <td id="enemy-D0" onclick="attCell(this.id)"></td>
          <td id="enemy-E0" onclick="attCell(this.id)"></td>
          <td id="enemy-F0" onclick="attCell(this.id)"></td>
          <td id="enemy-G0" onclick="attCell(this.id)"></td>
          <td id="enemy-H0" onclick="attCell(this.id)"></td>
          <td id="enemy-I0" onclick="attCell(this.id)"></td>
          <td id="enemy-J0" onclick="attCell(this.id)"></td>
        </tr>
        <tr>
          <th>1</th>
          <td id="enemy-A1" onclick="attCell(this.id)"></td>
          <td id="enemy-B1" onclick="attCell(this.id)"></td>
          <td id="enemy-C1" onclick="attCell(this.id)"></td>
          <td id="enemy-D1" onclick="attCell(this.id)"></td>
          <td id="enemy-E1" onclick="attCell(this.id)"></td>
          <td id="enemy-F1" onclick="attCell(this.id)"></td>
          <td id="enemy-G1" onclick="attCell(this.id)"></td>
          <td id="enemy-H1" onclick="attCell(this.id)"></td>
          <td id="enemy-I1" onclick="attCell(this.id)"></td>
          <td id="enemy-J1" onclick="attCell(this.id)"></td>
        </tr>
        <tr>
          <th>2</th>
          <td id="enemy-A2" onclick="attCell(this.id)"></td>
          <td id="enemy-B2" onclick="attCell(this.id)"></td>
          <td id="enemy-C2" onclick="attCell(this.id)"></td>
          <td id="enemy-D2" onclick="attCell(this.id)"></td>
          <td id="enemy-E2" onclick="attCell(this.id)"></td>
          <td id="enemy-F2" onclick="attCell(this.id)"></td>
          <td id="enemy-G2" onclick="attCell(this.id)"></td>
          <td id="enemy-H2" onclick="attCell(this.id)"></td>
          <td id="enemy-I2" onclick="attCell(this.id)"></td>
          <td id="enemy-J2" onclick="attCell(this.id)"></td>
        </tr>
        <tr>
          <th>3</th>
          <td id="enemy-A3" onclick="attCell(this.id)"></td>
          <td id="enemy-B3" onclick="attCell(this.id)"></td>
          <td id="enemy-C3" onclick="attCell(this.id)"></td>
          <td id="enemy-D3" onclick="attCell(this.id)"></td>
          <td id="enemy-E3" onclick="attCell(this.id)"></td>
          <td id="enemy-F3" onclick="attCell(this.id)"></td>
          <td id="enemy-G3" onclick="attCell(this.id)"></td>
          <td id="enemy-H3" onclick="attCell(this.id)"></td>
          <td id="enemy-I3" onclick="attCell(this.id)"></td>
          <td id="enemy-J3" onclick="attCell(this.id)"></td>
        </tr>
        <tr>
          <th>4</th>
          <td id="enemy-A4" onclick="attCell(this.id)"></td>
          <td id="enemy-B4" onclick="attCell(this.id)"></td>
          <td id="enemy-C4" onclick="attCell(this.id)"></td>
          <td id="enemy-D4" onclick="attCell(this.id)"></td>
          <td id="enemy-E4" onclick="attCell(this.id)"></td>
          <td id="enemy-F4" onclick="attCell(this.id)"></td>
          <td id="enemy-G4" onclick="attCell(this.id)"></td>
          <td id="enemy-H4" onclick="attCell(this.id)"></td>
          <td id="enemy-I4" onclick="attCell(this.id)"></td>
          <td id="enemy-J4" onclick="attCell(this.id)"></td>
        </tr>
        <tr>
          <th>5</th>
          <td id="enemy-A5" onclick="attCell(this.id)"></td>
          <td id="enemy-B5" onclick="attCell(this.id)"></td>
          <td id="enemy-C5" onclick="attCell(this.id)"></td>
          <td id="enemy-D5" onclick="attCell(this.id)"></td>
          <td id="enemy-E5" onclick="attCell(this.id)"></td>
          <td id="enemy-F5" onclick="attCell(this.id)"></td>
          <td id="enemy-G5" onclick="attCell(this.id)"></td>
          <td id="enemy-H5" onclick="attCell(this.id)"></td>
          <td id="enemy-I5" onclick="attCell(this.id)"></td>
          <td id="enemy-J5" onclick="attCell(this.id)"></td>
        </tr>
        <tr>
          <th>6</th>
          <td id="enemy-A6" onclick="attCell(this.id)"></td>
          <td id="enemy-B6" onclick="attCell(this.id)"></td>
          <td id="enemy-C6" onclick="attCell(this.id)"></td>
          <td id="enemy-D6" onclick="attCell(this.id)"></td>
          <td id="enemy-E6" onclick="attCell(this.id)"></td>
          <td id="enemy-F6" onclick="attCell(this.id)"></td>
          <td id="enemy-G6" onclick="attCell(this.id)"></td>
          <td id="enemy-H6" onclick="attCell(this.id)"></td>
          <td id="enemy-I6" onclick="attCell(this.id)"></td>
          <td id="enemy-J6" onclick="attCell(this.id)"></td>
        </tr>
        <tr>
          <th>7</th>
          <td id="enemy-A7" onclick="attCell(this.id)"></td>
          <td id="enemy-B7" onclick="attCell(this.id)"></td>
          <td id="enemy-C7" onclick="attCell(this.id)"></td>
          <td id="enemy-D7" onclick="attCell(this.id)"></td>
          <td id="enemy-E7" onclick="attCell(this.id)"></td>
          <td id="enemy-F7" onclick="attCell(this.id)"></td>
          <td id="enemy-G7" onclick="attCell(this.id)"></td>
          <td id="enemy-H7" onclick="attCell(this.id)"></td>
          <td id="enemy-I7" onclick="attCell(this.id)"></td>
          <td id="enemy-J7" onclick="attCell(this.id)"></td>
        </tr>
        <tr>
          <th>8</th>
          <td id="enemy-A8" onclick="attCell(this.id)"></td>
          <td id="enemy-B8" onclick="attCell(this.id)"></td>
          <td id="enemy-C8" onclick="attCell(this.id)"></td>
          <td id="enemy-D8" onclick="attCell(this.id)"></td>
          <td id="enemy-E8" onclick="attCell(this.id)"></td>
          <td id="enemy-F8" onclick="attCell(this.id)"></td>
          <td id="enemy-G8" onclick="attCell(this.id)"></td>
          <td id="enemy-H8" onclick="attCell(this.id)"></td>
          <td id="enemy-I8" onclick="attCell(this.id)"></td>
          <td id="enemy-J8" onclick="attCell(this.id)"></td>
        </tr>
        <tr>
          <th>9</th>
          <td id="enemy-A9" onclick="attCell(this.id)"></td>
          <td id="enemy-B9" onclick="attCell(this.id)"></td>
          <td id="enemy-C9" onclick="attCell(this.id)"></td>
          <td id="enemy-D9" onclick="attCell(this.id)"></td>
          <td id="enemy-E9" onclick="attCell(this.id)"></td>
          <td id="enemy-F9" onclick="attCell(this.id)"></td>
          <td id="enemy-G9" onclick="attCell(this.id)"></td>
          <td id="enemy-H9" onclick="attCell(this.id)"></td>
          <td id="enemy-I9" onclick="attCell(this.id)"></td>
          <td id="enemy-J9" onclick="attCell(this.id)"></td>
        </tr>
      </tbody>
    </table>

    <!-- <div id="center-div">
      <hr>
    </div> Commenting this line out for now, utilizing spacing and floats-->

    <table id="player-table">
      <thead>
        <caption id="player_name">PLAYER</caption>
        <caption id="player_ships">5 ships remaining</caption>
      </thead>
      <tbody>
        <tr>
          <th> </th>
          <th>A</th>
          <th>B</th>
          <th>C</th>
          <th>D</th>
          <th>E</th>
          <th>F</th>
          <th>G</th>
          <th>H</th>
          <th>I</th>
          <th>J</th>
        </tr>
        <tr>
          <th>0</th>
          <td id="my-A0" onclick="add2Arr(this.id)"></td>
          <td id="my-B0" onclick="add2Arr(this.id)"></td>
          <td id="my-C0" onclick="add2Arr(this.id)"></td>
          <td id="my-D0" onclick="add2Arr(this.id)"></td>
          <td id="my-E0" onclick="add2Arr(this.id)"></td>
          <td id="my-F0" onclick="add2Arr(this.id)"></td>
          <td id="my-G0" onclick="add2Arr(this.id)"></td>
          <td id="my-H0" onclick="add2Arr(this.id)"></td>
          <td id="my-I0" onclick="add2Arr(this.id)"></td>
          <td id="my-J0" onclick="add2Arr(this.id)"></td>
        </tr>
        <tr>
          <th>1</th>
          <td id="my-A1" onclick="add2Arr(this.id)"></td>
          <td id="my-B1" onclick="add2Arr(this.id)"></td>
          <td id="my-C1" onclick="add2Arr(this.id)"></td>
          <td id="my-D1" onclick="add2Arr(this.id)"></td>
          <td id="my-E1" onclick="add2Arr(this.id)"></td>
          <td id="my-F1" onclick="add2Arr(this.id)"></td>
          <td id="my-G1" onclick="add2Arr(this.id)"></td>
          <td id="my-H1" onclick="add2Arr(this.id)"></td>
          <td id="my-I1" onclick="add2Arr(this.id)"></td>
          <td id="my-J1" onclick="add2Arr(this.id)"></td>
        </tr>
        <tr>
          <th>2</th>
          <td id="my-A2" onclick="add2Arr(this.id)"></td>
          <td id="my-B2" onclick="add2Arr(this.id)"></td>
          <td id="my-C2" onclick="add2Arr(this.id)"></td>
          <td id="my-D2" onclick="add2Arr(this.id)"></td>
          <td id="my-E2" onclick="add2Arr(this.id)"></td>
          <td id="my-F2" onclick="add2Arr(this.id)"></td>
          <td id="my-G2" onclick="add2Arr(this.id)"></td>
          <td id="my-H2" onclick="add2Arr(this.id)"></td>
          <td id="my-I2" onclick="add2Arr(this.id)"></td>
          <td id="my-J2" onclick="add2Arr(this.id)"></td>
        </tr>
        <tr>
          <th>3</th>
          <td id="my-A3" onclick="add2Arr(this.id)"></td>
          <td id="my-B3" onclick="add2Arr(this.id)"></td>
          <td id="my-C3" onclick="add2Arr(this.id)"></td>
          <td id="my-D3" onclick="add2Arr(this.id)"></td>
          <td id="my-E3" onclick="add2Arr(this.id)"></td>
          <td id="my-F3" onclick="add2Arr(this.id)"></td>
          <td id="my-G3" onclick="add2Arr(this.id)"></td>
          <td id="my-H3" onclick="add2Arr(this.id)"></td>
          <td id="my-I3" onclick="add2Arr(this.id)"></td>
          <td id="my-J3" onclick="add2Arr(this.id)"></td>
        </tr>
        <tr>
          <th>4</th>
          <td id="my-A4" onclick="add2Arr(this.id)"></td>
          <td id="my-B4" onclick="add2Arr(this.id)"></td>
          <td id="my-C4" onclick="add2Arr(this.id)"></td>
          <td id="my-D4" onclick="add2Arr(this.id)"></td>
          <td id="my-E4" onclick="add2Arr(this.id)"></td>
          <td id="my-F4" onclick="add2Arr(this.id)"></td>
          <td id="my-G4" onclick="add2Arr(this.id)"></td>
          <td id="my-H4" onclick="add2Arr(this.id)"></td>
          <td id="my-I4" onclick="add2Arr(this.id)"></td>
          <td id="my-J4" onclick="add2Arr(this.id)"></td>
        </tr>
        <tr>
          <th>5</th>
          <td id="my-A5" onclick="add2Arr(this.id)"></td>
          <td id="my-B5" onclick="add2Arr(this.id)"></td>
          <td id="my-C5" onclick="add2Arr(this.id)"></td>
          <td id="my-D5" onclick="add2Arr(this.id)"></td>
          <td id="my-E5" onclick="add2Arr(this.id)"></td>
          <td id="my-F5" onclick="add2Arr(this.id)"></td>
          <td id="my-G5" onclick="add2Arr(this.id)"></td>
          <td id="my-H5" onclick="add2Arr(this.id)"></td>
          <td id="my-I5" onclick="add2Arr(this.id)"></td>
          <td id="my-J5" onclick="add2Arr(this.id)"></td>
        </tr>
        <tr>
          <th>6</th>
          <td id="my-A6" onclick="add2Arr(this.id)"></td>
          <td id="my-B6" onclick="add2Arr(this.id)"></td>
          <td id="my-C6" onclick="add2Arr(this.id)"></td>
          <td id="my-D6" onclick="add2Arr(this.id)"></td>
          <td id="my-E6" onclick="add2Arr(this.id)"></td>
          <td id="my-F6" onclick="add2Arr(this.id)"></td>
          <td id="my-G6" onclick="add2Arr(this.id)"></td>
          <td id="my-H6" onclick="add2Arr(this.id)"></td>
          <td id="my-I6" onclick="add2Arr(this.id)"></td>
          <td id="my-J6" onclick="add2Arr(this.id)"></td>
        </tr>
        <tr>
          <th>7</th>
          <td id="my-A7" onclick="add2Arr(this.id)"></td>
          <td id="my-B7" onclick="add2Arr(this.id)"></td>
          <td id="my-C7" onclick="add2Arr(this.id)"></td>
          <td id="my-D7" onclick="add2Arr(this.id)"></td>
          <td id="my-E7" onclick="add2Arr(this.id)"></td>
          <td id="my-F7" onclick="add2Arr(this.id)"></td>
          <td id="my-G7" onclick="add2Arr(this.id)"></td>
          <td id="my-H7" onclick="add2Arr(this.id)"></td>
          <td id="my-I7" onclick="add2Arr(this.id)"></td>
          <td id="my-J7" onclick="add2Arr(this.id)"></td>
        </tr>
        <tr>
          <th>8</th>
          <td id="my-A8" onclick="add2Arr(this.id)"></td>
          <td id="my-B8" onclick="add2Arr(this.id)"></td>
          <td id="my-C8" onclick="add2Arr(this.id)"></td>
          <td id="my-D8" onclick="add2Arr(this.id)"></td>
          <td id="my-E8" onclick="add2Arr(this.id)"></td>
          <td id="my-F8" onclick="add2Arr(this.id)"></td>
          <td id="my-G8" onclick="add2Arr(this.id)"></td>
          <td id="my-H8" onclick="add2Arr(this.id)"></td>
          <td id="my-I8" onclick="add2Arr(this.id)"></td>
          <td id="my-J8" onclick="add2Arr(this.id)"></td>
        </tr>
        <tr>
          <th>9</th>
          <td id="my-A9" onclick="add2Arr(this.id)"></td>
          <td id="my-B9" onclick="add2Arr(this.id)"></td>
          <td id="my-C9" onclick="add2Arr(this.id)"></td>
          <td id="my-D9" onclick="add2Arr(this.id)"></td>
          <td id="my-E9" onclick="add2Arr(this.id)"></td>
          <td id="my-F9" onclick="add2Arr(this.id)"></td>
          <td id="my-G9" onclick="add2Arr(this.id)"></td>
          <td id="my-H9" onclick="add2Arr(this.id)"></td>
          <td id="my-I9" onclick="add2Arr(this.id)"></td>
          <td id="my-J9" onclick="add2Arr(this.id)"></td>
        </tr>
      </tbody>
    </table>
    <button type="button" id="place" name="place" onclick="placeShip()">Place Ship</button>
    <button type="button" id="start" name="start" onclick="postShips()">Send to Server</button>
    <div class="temp-testing-buttons">
      <button type="button" id="username-button" onclick="tempUpdateUsername()">Set Username</button>
      <button type="button" id="default-ships-button" onclick="tempShips()">Use default ship placement</button>
      <button type="button" id="attack-button" onclick="tempAttack(0)">Attack</button>
      <button type="button" id="s-attack-button1" onclick="tempAttack(1)">3-Hit Super Attack</button>
      <button type="button" id="s-attack-button2" onclick="tempAttack(2)">Torpedo Super Attack</button>
      <button type="button" id="s-attack-button3" onclick="tempAttack(3)">Nuke</button>
    </div>
    <div id="game-buttons">
      <button type="button" id="host-button" onclick="startGame()">Host Game</button>
      <button type="button" id="join-button" onclick="joinGamePrompt()">Join Game</button>
      <button type="button" id="ready-button" onclick="readyUp()">Ready Up</button>
    </div>
    <div id="ships">
      <img id="patrol" onclick="selectShip(this.id)" src="images/patrol.png">
      <img id="sub" onclick="selectShip(this.id)" src="images/sub.png">
      <img id="destroyer" onclick="selectShip(this.id)" src="images/destroyer.png">
      <img id="battleship" onclick="selectShip(this.id)" src="images/battleship.png">
      <img id="carrier" onclick="selectShip(this.id)" src="images/carrier.png">
      <!-- Temporary div, since the ships will be moved to the table -->
    </div>
  </div>

  <script type="text/javascript">
    //Board variables
    var selectedShip = "";
    var targetCell = "";
    var targetCells = [];
    var cellArr = [];
    var cArr = [];
    var pArr = [];
    var dArr = [];
    var bArr = [];
    var sArr = [];
    //Game variables
    var username = "";
    //Get username from local storage
    if (localStorage.username) username = localStorage.username;
    //Else redirect user to log-in page
    else {
      /*
      //Commented out for testing purposes
      alert("Please log-in before starting a game");
      window.location.href = "login.html";
      */
      username = "";
    }
    var lobbyname = "";
    var inLobby = false; //Player has joined a game but session is not running yet
    var ongoing = false; //Game is in session, both players ready, taking turns
    var myTurn = false; //Bool for player's turn
    var enemy = ""; //Enemy name
    var enemyLastTurn = "";
    var playerReady = false;
    var enemyReady = false;
    var victory;
    var playerShips = 5;
    var enemyShips = 5;
    var superattuse = false;

    var startTime;
    var timeI;
    var updatedTime;
    var savedTime;
    var difference;
    var running = false;

    function startTimer() {
      if (!running) {
        running = true;
        startTime = new Date().getTime();
        timeI = setInterval(getShowTime, 1);
      }
    }

    function getShowTime() {
      updatedTime = new Date().getTime();
      if (savedTime) {
        difference = (updatedTime - startTime) + savedTime;
      } else {
        difference = updatedTime - startTime;
      }
      var hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((difference % (1000 * 60)) / 1000);

      hours = (hours < 10) ? "0" + hours : hours;
      minutes = (minutes < 10) ? "0" + minutes : minutes;
      seconds = (seconds < 10) ? "0" + seconds : seconds;
      document.getElementById("timer").innerHTML = hours + ':' + minutes + ':' + seconds;
    }

    function stopTimer() {
      clearInterval(timeI);
      savedTime = difference;
      running = false;
    }

    //Used as a sort of sleep() function
    const sleepFor = (delay) => new Promise((resolve) => setTimeout(resolve, delay))

    function setActivePlayer(name) {
      if (name == username) {
        myTurn = true;
        alert("Your turn");
        document.getElementById("player_name").style.border = "3px solid black";
        document.getElementById("enemy_name").style.border = "none";
      } else {
        myTurn = false;
        document.getElementById("enemy_name").style.border = "3px solid black";
        document.getElementById("player_name").style.border = "none";
        alert("Waiting for other player to take their turn: " + enemy);
        wasHit(name);
      }
    }

    //Retrieves lastTarget from specified user in game table then checks if it hit against the other user
    //Can be used to see if we landed an attack or if an attack hit us, username is source of attack
    function wasHit(name) {
      var xmlhttp = new XMLHttpRequest();
      var url = "./scripts/isHit.php";
      if (name != username) url = "./scripts/isHitWithUpdate.php";
      xmlhttp.onreadystatechange = async function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          var response = JSON.parse(xmlhttp.responseText);
          if (response["Result"] == "Success") {
            //Variables pulled from php
            var target;
            if (response["targetString"] != "ERROR") target = response["targetString"];
            var shipDestroyedAmount = response["shipDestroyedAmount"];
            var hitArr = response["hitLocations"];
            var missArr = response["missLocations"];

            if (name != username) { //Attack source: enemy player
              if (target != enemyLastTurn && target != null) { //Enemy has taken their turn
                // Update board if player was hit here or where the miss is
                for (let i = 0; i < hitArr.length; i++) {
                  document.getElementById("my-" + hitArr[i]).innerHTML = "X";
                  console.log("Hit at (" + hitArr[i] + ") player side");
                }
                for (let i = 0; i < missArr.length; i++) {
                  document.getElementById("my-" + missArr[i]).innerHTML = "O";
                  console.log("Miss at (" + missArr[i] + ") player side");
                }

                playerShips -= response["shipDestroyedAmount"];
                document.getElementById("player_ships").innerHTML = playerShips + " ships remaining";
                if (playerShips == 0) {
                  endgame(0);
                }
                enemyLastTurn = target;
                setActivePlayer(username);
              } else { //Still waiting on enemy to take their turn
                await sleepFor(5000);
                wasHit(name);
              }
            } else { //Attack source: current player
              // Update board if enemy was hit here or where the miss is
              alert(hitArr.length + " hits!");
              for (let i = 0; i < hitArr.length; i++) {
                document.getElementById("enemy-" + hitArr[i]).innerHTML = "X";
                console.log("Hit at (" + hitArr[i] + ") enemy side");
              }
              for (let i = 0; i < missArr.length; i++) {
                document.getElementById("enemy-" + missArr[i]).innerHTML = "O";
                console.log("Miss at (" + missArr[i] + ") enemy side");
              }
              enemyShips -= response["shipDestroyedAmount"];
              document.getElementById("enemy_ships").innerHTML = enemyShips + " ships remaining";
              if (enemyShips == 0) {
                endgame(1);
              }
              setActivePlayer(enemy);
            }
          } else {
            alert("An error occurred: " + response["Result"]);
          }
        }
      };
      xmlhttp.open("POST", url, true);
      xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xmlhttp.send("uname=" + name + "&lobbyname=" + lobbyname);
    }

    function attCell(cell) {
      if (ongoing && myTurn) {
        if (targetCell != "") {
          if (!(document.getElementById(targetCell).innerHTML == "X" || document.getElementById(targetCell).innerHTML == "O")) {
            document.getElementById(targetCell).innerHTML = "";
          }
        }
        targetCell = cell;
        document.getElementById(targetCell).innerHTML = "?";

        switch (targetCells.length) {
          case 0:
            targetCells.push(cell);
            break;
          case 1:
            targetCells.push(cell);
            break;
          case 2:
            targetCells.push(cell);
            break;
          default:
            targetCells.shift();
            targetCells.push(cell);
            break;
        }
      }
    }

    //Updates lastTarget in game table
    //Then calls wasHit() to see if the attack was successful
    function tempAttack(superatt) {
      if (targetCell != "") {
        var targets = "";
        switch (superatt) {
          case 0: //Regular Attack, 1 tile selection
            targets = targetCell.slice(6);
            break;
          case 1: //3-Hit Attack, 3 tile selection
            if ((superattuse == false) && (playerShips <= 2)) {
              targets = targetCells[0].slice(6);
              targets += targetCells[1].slice(6);
              targets += targetCells[2].slice(6);
              superattuse = true;
            } else {
              targets = targetCell.slice(6);
            }
            break;
          case 2: //Super Attack, 1 tile selection with neighboring tiles hit (cross)
            if ((superattuse == false) && (playerShips <= 2)) {
              targets = targetCell.slice(6);
              var letter = targetCell.slice(6, 7);
              var number = targetCell.slice(7);
              if (Number(number) + 1 != 10) {
                targets += letter + String(Number(number) + 1);
              }
              if (Number(number) - 1 != -1) {
                targets += letter + String(Number(number) - 1);
              }
              switch (letter) {
                case 'A':
                  targets += "B" + number;
                  break;
                case 'B':
                  targets += "A" + number;
                  targets += "C" + number;
                  break;
                case 'C':
                  targets += "B" + number;
                  targets += "D" + number;
                  break;
                case 'D':
                  targets += "C" + number;
                  targets += "E" + number;
                  break;
                case 'E':
                  targets += "D" + number;
                  targets += "F" + number;
                  break;
                case 'F':
                  targets += "E" + number;
                  targets += "G" + number;
                  break;
                case 'G':
                  targets += "F" + number;
                  targets += "H" + number;
                  break;
                case 'H':
                  targets += "G" + number;
                  targets += "I" + number;
                  break;
                case 'I':
                  targets += "H" + number;
                  targets += "J" + number;
                  break;
                case 'J':
                  targets += "I" + number;
                  break;
              }
              superattuse = true;
            } else {
              targets = targetCell.slice(6);
            }
            case 3: // Purely for debugging purposes; will break the game for the enemy
              enemyShips = 0;
              endgame(1);
        }
        var xmlhttp = new XMLHttpRequest();
        var url = "./scripts/attack.php";
        xmlhttp.onreadystatechange = function() {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var response = xmlhttp.responseText;
            if (response == "Success") {
              wasHit(username); //Check if player hit anything
            } else {
              alert(response);
            }
          }
        };
        xmlhttp.open("POST", url, true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("uname=" + username + "&lobbyname=" + lobbyname + "&targets=" + targets);
      }
    }

    //Used to set username, for testing purposes only
    //Otherwise username should come from login
    function tempUpdateUsername() {
      input = prompt("Username: ");
      if (input) {
        this.username = input;
        console.log("username updated to: ", this.username);
      }
    }

    function tempShips() {
      cellArr = ["my-E7", "my-F7", "my-G7", "my-H7", "my-I7"];
      selectedShip = "carrier";
      placeShip();
      cellArr = ["my-A1", "my-B1"];
      selectedShip = "patrol";
      placeShip();
      cellArr = ["my-I3", "my-I4", "my-I5"];
      selectedShip = "destroyer";
      placeShip();
      cellArr = ["my-C9", "my-D9", "my-E9", "my-F9"];
      selectedShip = "battleship";
      placeShip();
      cellArr = ["my-D3", "my-E3", "my-F3"];
      selectedShip = "sub";
      placeShip();
      var xmlhttp = new XMLHttpRequest();
      var url = "./scripts/initShips.php";
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          var response = xmlhttp.responseText;
          alert(response);
        }
      };
      xmlhttp.open("POST", url, true);
      xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xmlhttp.send("uname=" + username + "&lobbyname=" + lobbyname);
    }

    function startGame() {
      //createLobby.php, send username(required) and lobbyname (not required)
      input = prompt("Lobby Name: ");
      if (input) {
        var xmlhttp = new XMLHttpRequest();
        var url = "./scripts/createLobby.php";
        xmlhttp.onreadystatechange = function() {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var response = xmlhttp.responseText;
            if (response == "Success") {
              joinGame(input);
              ongoing = true;
            } else {
              alert(response + ", lobby may already exist");
            }
          }
        };
        xmlhttp.open("POST", url, true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("uname=" + username + "&lobbyname=" + input);
      }
    }

    function joinGamePrompt() {
      //initPlayer.php, send username(required), lobbyname (required), and ship locations as strings
      input = prompt("Lobby Name: ");
      if (input) {
        var xmlhttp = new XMLHttpRequest();
        var url = "./scripts/initPlayer.php";
        xmlhttp.onreadystatechange = function() {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var response = xmlhttp.responseText;
            alert(response);
            if (response == "Success") {
              inLobby = true;
              lobbyname = input;
            }
          }
        };
        xmlhttp.open("POST", url, true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("uname=" + username + "&lobbyname=" + input);
      }
    }

    function joinGame(lobby) {
      //initPlayer.php, send username(required), lobbyname (required), and ship locations as strings
      var xmlhttp = new XMLHttpRequest();
      var url = "./scripts/initPlayer.php";
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          var response = xmlhttp.responseText;
          alert(response);
          if (response == "Success") {
            inLobby = true;
            lobbyname = lobby;
          }
        }
      };
      xmlhttp.open("POST", url, true);
      xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xmlhttp.send("uname=" + username + "&lobbyname=" + lobby);
    }

    function readyUp() {
      //readySet.php, send username(required), lobbyname (not required), and readyStatus (defaults to True if not specified)
      var xmlhttp = new XMLHttpRequest();
      var url = "./scripts/readySet.php";
      xmlhttp.onreadystatechange = async function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          var response = JSON.parse(xmlhttp.responseText);
          if (response["Result"] == "Success") {
            enemyReady = response["playersReady"];
            if (!playerReady && !enemyReady) {
              alert("Waiting for other player to ready up...");
            }
            playerReady = true; //Used to send above alert only once
            if (enemyReady) {
              alert("Game started");
              startTimer();
              enemyReady = true;
              ongoing = true;
              if (response["p1"] == username) {
                enemy = response["p2"];
              } else {
                enemy = response["p1"];
              }
              document.getElementById("player_name").innerHTML = username;
              document.getElementById("enemy_name").innerHTML = enemy;
              disableButtons();
              setActivePlayer(response["firstPlayer"]);
            } else {
              //Wait 0.5s, then call again to see if enemy has readied up since then
              await sleepFor(500);
              readyUp();
            }
          }
        }
      };
      xmlhttp.open("POST", url, true);
      xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xmlhttp.send("uname=" + username + "&lobbyname=" + lobbyname);
    }

    function readyUpSet(b) {
      //readySet.php, send username(required), lobbyname (not required), and readyStatus (defaults to True if not specified)
      var xmlhttp = new XMLHttpRequest();
      var url = "./scripts/readySet.php";
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          var response = xmlhttp.responseText;
          alert(response);
        }
      };
      xmlhttp.open("POST", url, true);
      xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      if (b) {
        xmlhttp.send("uname=" + username + "&lobbyname=" + lobbyname + "&ready=True");
      } else {
        xmlhttp.send("uname=" + username + "&lobbyname=" + lobbyname + "&ready=False");
      }
    }

    function endgame(result) {
      var finalTime = document.getElementById('timer').innerHTML;
      switch (result) {
        case 0:
          alert("You lose!");
          victory = false;
          break;
        case 1:
          alert("You win!");
          victory = true;
          break;
      }
      //ongoing = false;
      stopTimer();
      var xmlhttp = new XMLHttpRequest();
      var url = "./scripts/updatePlayerRecords.php";
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          var response = xmlhttp.responseText;
          alert(response);
        }
      };
      xmlhttp.open("POST", url, true);
      xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xmlhttp.send("uname=" + username + "&time=" + finalTime + "&win=" + victory);
    }

    function selectShip(ship) {
      document.getElementById("patrol").style.border = "none";
      document.getElementById("sub").style.border = "none";
      document.getElementById("destroyer").style.border = "none";
      document.getElementById("battleship").style.border = "none";
      document.getElementById("carrier").style.border = "none";
      selectedShip = ship;
      document.getElementById(ship).style.border = "3px solid black";
    }

    function add2Arr(cell) {
      cellArr.push(cell);
      document.getElementById(cell).style.backgroundColor = "white";
    }

    function verifyAdj() {
      let valid = false;
      let letter = "";
      let number = "";
      var table = document.getElementById("player-table")
      for (let i = 0; i < cellArr.length - 1; i++) {
        valid = false;
        if (cellArr[i].includes("A")) {
          letter = 1;
        } else if (cellArr[i].includes("B")) {
          letter = 2;
        } else if (cellArr[i].includes("C")) {
          letter = 3;
        } else if (cellArr[i].includes("D")) {
          letter = 4;
        } else if (cellArr[i].includes("E")) {
          letter = 5;
        } else if (cellArr[i].includes("F")) {
          letter = 6;
        } else if (cellArr[i].includes("G")) {
          letter = 7;
        } else if (cellArr[i].includes("H")) {
          letter = 8;
        } else if (cellArr[i].includes("I")) {
          letter = 9;
        } else if (cellArr[i].includes("J")) {
          letter = 10;
        } else {
          return false;
        }

        if (cellArr[i].includes("0")) {
          number = 0;
        } else if (cellArr[i].includes("1")) {
          number = 1;
        } else if (cellArr[i].includes("2")) {
          number = 2;
        } else if (cellArr[i].includes("3")) {
          number = 3;
        } else if (cellArr[i].includes("4")) {
          number = 4;
        } else if (cellArr[i].includes("5")) {
          number = 5;
        } else if (cellArr[i].includes("6")) {
          number = 6;
        } else if (cellArr[i].includes("7")) {
          number = 7;
        } else if (cellArr[i].includes("8")) {
          number = 8;
        } else if (cellArr[i].includes("9")) {
          number = 9;
        } else {
          return false;
        }

        console.log("Checking adj of " + cellArr[i + 1] + " with " + cellArr[i] + ": (" + letter + ", " + number + ")");

        switch (letter) {
          case 1: // my-A#
            switch (true) { // my-A0, my-A9, my-A1..my-A8
              case ((number === 0) && ((cellArr[i + 1] === "my-A1") || (cellArr[i + 1] === "my-B0"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((number === 9) && ((cellArr[i + 1] === "my-A8") || (cellArr[i + 1] === "my-B9"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case (((cellArr[i + 1] == "my-A" + String(number + 1)) || (cellArr[i + 1] == "my-A" + String(number - 1)) || (cellArr[i + 1] == "my-B" + number))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              default:
                console.log(cellArr[i + 1] + " invalid");
                return false;
            }
            break;
          case 2: // my-B#
            switch (true) { // my-B0, my-B9, my-B1..my-B8
              case ((number === 0) && ((cellArr[i + 1] == "my-A0") || (cellArr[i + 1] == "my-C0") || (cellArr[i + 1] == "my-B1"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((number === 9) && ((cellArr[i + 1] == "my-A9") || (cellArr[i + 1] == "my-C9") || (cellArr[i + 1] == "my-B8"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((cellArr[i + 1] == "my-B" + String(number + 1)) || (cellArr[i + 1] == "my-B" + String(number - 1)) || (cellArr[i + 1] == "my-A" + number) || (cellArr[i + 1] == "my-C" + number)):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              default:
                console.log(cellArr[i + 1] + " invalid");
                return false;
            }
            break;
          case 3: // my-C#
            switch (true) { // my-C0, my-C9, my-C1..my-C8
              case ((number === 0) && ((cellArr[i + 1] == "my-B0") || (cellArr[i + 1] == "my-D0") || (cellArr[i + 1] == "my-C1"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((number === 9) && ((cellArr[i + 1] == "my-B9") || (cellArr[i + 1] == "my-D9") || (cellArr[i + 1] == "my-C8"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((cellArr[i + 1] == "my-C" + String(number + 1)) || (cellArr[i + 1] == "my-C" + String(number - 1)) || (cellArr[i + 1] == "my-B" + number) || (cellArr[i + 1] == "my-D" + number)):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              default:
                console.log(cellArr[i + 1] + " invalid");
                return false;
            }
            break;
          case 4: // my-D#
            switch (true) { // my-D0, my-D9, my-D1..my-D8
              case ((number === 0) && ((cellArr[i + 1] == "my-C0") || (cellArr[i + 1] == "my-E0") || (cellArr[i + 1] == "my-D1"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((number === 9) && ((cellArr[i + 1] == "my-C9") || (cellArr[i + 1] == "my-E9") || (cellArr[i + 1] == "my-D8"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((cellArr[i + 1] == "my-D" + String(number + 1)) || (cellArr[i + 1] == "my-D" + String(number - 1)) || (cellArr[i + 1] == "my-C" + number) || (cellArr[i + 1] == "my-E" + number)):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              default:
                console.log(cellArr[i + 1] + " invalid");
                return false;
            }
            break;
          case 5: // my-E#
            switch (true) { // my-E0, my-E9, my-E1..my-E8
              case ((number === 0) && ((cellArr[i + 1] == "my-D0") || (cellArr[i + 1] == "my-F0") || (cellArr[i + 1] == "my-E1"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((number === 9) && ((cellArr[i + 1] == "my-D9") || (cellArr[i + 1] == "my-F9") || (cellArr[i + 1] == "my-E8"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((cellArr[i + 1] == "my-E" + String(number + 1)) || (cellArr[i + 1] == "my-E" + String(number - 1)) || (cellArr[i + 1] == "my-D" + number) || (cellArr[i + 1] == "my-F" + number)):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              default:
                console.log(cellArr[i + 1] + " invalid");
                return false;
            }
            break;
          case 6: // my-F#
            switch (true) { // my-F0, my-F9, my-F1..my-F8
              case ((number === 0) && ((cellArr[i + 1] == "my-E0") || (cellArr[i + 1] == "my-G0") || (cellArr[i + 1] == "my-F1"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((number === 9) && ((cellArr[i + 1] == "my-E9") || (cellArr[i + 1] == "my-G9") || (cellArr[i + 1] == "my-F8"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((cellArr[i + 1] == "my-F" + String(number + 1)) || (cellArr[i + 1] == "my-F" + String(number - 1)) || (cellArr[i + 1] == "my-E" + number) || (cellArr[i + 1] == "my-G" + number)):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              default:
                console.log(cellArr[i + 1] + " invalid");
                return false;
            }
            break;
          case 7: // my-G#
            switch (true) { // my-G0, my-G9, my-G1..my-G8
              case ((number === 0) && ((cellArr[i + 1] == "my-F0") || (cellArr[i + 1] == "my-H0") || (cellArr[i + 1] == "my-G1"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((number === 9) && ((cellArr[i + 1] == "my-F9") || (cellArr[i + 1] == "my-H9") || (cellArr[i + 1] == "my-G8"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((cellArr[i + 1] == "my-G" + String(number + 1)) || (cellArr[i + 1] == "my-G" + String(number - 1)) || (cellArr[i + 1] == "my-F" + number) || (cellArr[i + 1] == "my-H" + number)):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              default:
                console.log(cellArr[i + 1] + " invalid");
                return false;
            }
            break;
          case 8: // my-H#
            switch (true) { // my-H0, my-H9, my-H1..my-H8
              case ((number === 0) && ((cellArr[i + 1] == "my-G0") || (cellArr[i + 1] == "my-I0") || (cellArr[i + 1] == "my-H1"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((number === 9) && ((cellArr[i + 1] == "my-G9") || (cellArr[i + 1] == "my-I9") || (cellArr[i + 1] == "my-H8"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((cellArr[i + 1] == "my-H" + String(number + 1)) || (cellArr[i + 1] == "my-H" + String(number - 1)) || (cellArr[i + 1] == "my-G" + number) || (cellArr[i + 1] == "my-I" + number)):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              default:
                console.log(cellArr[i + 1] + " invalid");
                return false;
            }
            break;
          case 9: // my-I#
            switch (true) { // my-I0, my-I9, my-I1..my-I8
              case ((number === 0) && ((cellArr[i + 1] == "my-H0") || (cellArr[i + 1] == "my-J0") || (cellArr[i + 1] == "my-I1"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((number === 9) && ((cellArr[i + 1] == "my-H9") || (cellArr[i + 1] == "my-J9") || (cellArr[i + 1] == "my-I8"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((cellArr[i + 1] == "my-I" + String(number + 1)) || (cellArr[i + 1] == "my-I" + String(number - 1)) || (cellArr[i + 1] == "my-H" + number) || (cellArr[i + 1] == "my-J" + number)):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              default:
                console.log(cellArr[i + 1] + " invalid");
                return false;
            }
            break;
          case 10: // my-J#
            switch (true) { // my-J0, my-J9, my-J1..my-J8
              case ((number === 0) && ((cellArr[i + 1] === "my-J1") || (cellArr[i + 1] === "my-I0"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case ((number === 9) && ((cellArr[i + 1] === "my-J8") || (cellArr[i + 1] === "my-I9"))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              case (((cellArr[i + 1] == "my-J" + String(number + 1)) || (cellArr[i + 1] == "my-J" + String(number - 1)) || (cellArr[i + 1] == "my-J" + number))):
                valid = true;
                console.log(cellArr[i + 1] + " valid");
                break;
              default:
                console.log(cellArr[i + 1] + " invalid");
                return false;
            }
            break;
        }
      }
      return valid;
    }

    function placeShip() {
      if (selectedShip != "" && cellArr.length >= 2 && cellArr.length <= 5) {
        let adj = verifyAdj();
        if (selectedShip == "patrol" && cellArr.length == 2 && adj) {
          for (let i = 0; i < cellArr.length; i++) {
            document.getElementById(cellArr[i]).innerHTML = "P";
            document.getElementById(cellArr[i]).style.backgroundColor = "#c41230";
            pArr.push(cellArr[i]);
            //cellArr.delete(i);
          }
          document.getElementById("patrol").visibility = "hidden";
        } else if (selectedShip == "sub" && cellArr.length == 3 && adj) {
          for (let i = 0; i < cellArr.length; i++) {
            document.getElementById(cellArr[i]).innerHTML = "S";
            document.getElementById(cellArr[i]).style.backgroundColor = "#c41230";
            sArr.push(cellArr[i]);
            //cellArr.delete(i);
          }
        } else if (selectedShip = "destroyer" && cellArr.length == 3 && adj) {
          for (let i = 0; i < cellArr.length; i++) {
            document.getElementById(cellArr[i]).innerHTML = "D";
            document.getElementById(cellArr[i]).style.backgroundColor = "#c41230";
            dArr.push(cellArr[i]);
            //cellArr.delete(i);
          }
        } else if (selectedShip = "battleship" && cellArr.length == 4 && adj) {
          for (let i = 0; i < cellArr.length; i++) {
            document.getElementById(cellArr[i]).innerHTML = "B";
            document.getElementById(cellArr[i]).style.backgroundColor = "#c41230";
            bArr.push(cellArr[i]);
            //cellArr.delete(i);
          }
        } else if (selectedShip = "carrier" && cellArr.length == 5 && adj) {
          for (let i = 0; i < cellArr.length; i++) {
            document.getElementById(cellArr[i]).innerHTML = "C";
            document.getElementById(cellArr[i]).style.backgroundColor = "#c41230";
            cArr.push(cellArr[i]);
            //cellArr.delete(i);
          }
        } else {
          alert("Error: Check selected cells and ship. Selected cells must equal ship length.");
          for (let i = 0; i < cellArr.length; i++) {
            document.getElementById(cellArr[i]).style.backgroundColor = "#c41230";
          }
        }
      } else {
        alert("Error: Check selected cells and ship. Selected cells must equal ship length.");
        for (let i = 0; i < cellArr.length; i++) {
          document.getElementById(cellArr[i]).style.backgroundColor = "#c41230";
        }
      }
      selectedShip = "";
      cellArr = [];
    }

    function postShips() {
      if (pArr.length == 2 && sArr.length == 3 && dArr.length == 3 && bArr.length == 4 && cArr.length == 5) {
        document.getElementById("ships").style.display = "hidden";
        var pArr_str = String(pArr[0].slice(3) + pArr[1].slice(3));
        var sArr_str = String(sArr[0].slice(3) + sArr[1].slice(3) + sArr[2].slice(3));
        var dArr_str = String(dArr[0].slice(3) + dArr[1].slice(3) + dArr[2].slice(3));
        var bArr_str = String(bArr[0].slice(3) + bArr[1].slice(3) + bArr[2].slice(3) + bArr[3].slice(3));
        var cArr_str = String(cArr[0].slice(3) + cArr[1].slice(3) + cArr[2].slice(3) + cArr[3].slice(3) + cArr[4].slice(3));
        var xmlhttp = new XMLHttpRequest();
        var url = "./scripts/initShips.php";
        xmlhttp.onreadystatechange = function() {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var response = xmlhttp.responseText;
            alert(response);
          }
        };
        xmlhttp.open("POST", url, true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("uname=" + username + "&lobbyname=" + lobbyname + "&carrier=" + cArr_str + "&battleship=" + bArr_str + "&destroyer=" + dArr_str + "&submarine=" + sArr_str + "&patrolboat=" + pArr_str);
      } else {
        alert("Have all ships been placed?");
      }
    }

    function disableButtons() {
      document.getElementById("ships").style.display = "none";
      document.getElementById("place").style.display = "none";
      document.getElementById("start").style.display = "none";
      document.getElementById("game-buttons").style.display = "none";
      document.getElementById("username-button").style.display = "none";
      document.getElementById("default-ships-button").style.display = "none";
    }
  </script>
</body>

</html>